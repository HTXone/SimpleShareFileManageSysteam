<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>文件管理 | 共享云端</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="img/factory1.ico">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/meanmenu.min.css">
    <link rel="stylesheet" href="css/educate-custon-icon.css">
    <!-- metisMenu CSS
    	============================================ -->
    <link rel="stylesheet" href="css/metisMenu/metisMenu.min.css">
    <link rel="stylesheet" href="css/metisMenu/metisMenu-vertical.css">
    <!-- style CSS
    	============================================ -->
    <link rel="stylesheet" href="style.css">
	<link rel="stylesheet" href="css/toastr.css" />
	<style>
		table tr#th{
			background-color: #006df0;
			color: white;
		}
		
		.status1{
			background-color: orange;
			color: white;
			
			
		}
		
		.status2{
			
			background-color: green;
			color: white;
		}
		
		.status3{
			background-color: red;
			color: white;
			
		}
		
		.status4{
			background-color: deepskyblue;
			color: white;
		}
		
		.info{
			color: gray;
		}
		.data{
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }
		
		.selectBtn{
			margin-left: 20px;
			margin-top: 2px;
		}
		.selectBtn2{
			padding-left: 3px;
			padding-right: 3px;
			width: 150px;
		}
		.addBtn{
			margin-right: 20px;
			margin-top: 2px;
			float: right;
		}
	</style>
    
	<style type="text/css">
		.a{
			margin-top: 70px;
		}
		.disabled {
		            pointer-events: none;
		            filter: alpha(opacity=50);
		            -moz-opacity: 0.5; 
		            opacity: 0.5; 
					}
	</style>
    </head>

<body>
    <!--[if lt IE 8]>
		<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
	<![endif]-->
    <!-- Start Left menu area -->
    <div class="left-sidebar-pro">
        <nav id="sidebar" class="">
            <div class="sidebar-header">
                <a href="index_.html"><img class="main-logo" src="img/logo/LOGO1.png" alt="" /></a>
                <strong><a href="index_.html"><img src="img/logo/factory6.png" alt="" /></a></strong>
            </div>
            <div class="left-custom-menu-adp-wrap comment-scrollbar">
                <nav class="sidebar-nav left-sidebar-menu-pro">
                    <ul class="metismenu" id="menu1">
                        <li class="checked">
                            <a  href="index_.html"  >
								   <span class="educate-icon educate-home icon-wrap"></span>
								   <span class="mini-click-non">文件管理</span>
								</a>
                        </li>
                        </li>
                        <li>
                            <a href="History.html" aria-expanded="false"><span class="educate-icon educate-search icon-wrap"></span> <span class="mini-click-non">历史记录</span></a>
                            
                        </li>
                        <li>
                            <a href="users.html" aria-expanded="false"><span class="educate-icon educate-professor icon-wrap"></span> <span class="mini-click-non">用户管理</span></a>
                        
                        </li>
                        
                    </ul>
                </nav>
            </div>
        </nav>
    </div>
    <div class="all-content-wrapper">
        
        <div class="header-advance-area">
            <div class="header-top-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="header-top-wraper">
                                <div class="header-top-wraper">
                                    <div class="row">
                                        <div class="col-lg-1 col-md-0 col-sm-1 col-xs-12">
                                            <div class="menu-switcher-pro">
                                                <button type="button" id="sidebarCollapse" class="btn bar-button-pro header-drl-controller-btn btn-info navbar-btn">
                                						<i class="educate-icon educate-nav"></i>
                                					</button>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-7 col-sm-6 col-xs-12">
                                            <div class="header-top-menu tabl-d-n">
                                                
                                            </div>
                                        </div>
                                        <div class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
                                            <div class="header-right-info">
                                                <ul class="nav navbar-nav mai-top-nav header-right-menu">
                                                    <li class="nav-item" id="uname">
                                                        <a :href="link" @click="isLogin" class="info"data-toggle="modal" data-target="#logout" >{{username}}</a>
                                                    </li>
                                                    
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mobile Menu start -->
            <div class="mobile-menu-area">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            <div class="mobile-menu">
                                <nav id="dropdown">
                                    <ul class="mobile-menu-nav">
                                        <li><a data-toggle="collapse" data-target="#Charts" href="index_.html">文件管理 <span class="admin-project-icon edu-icon edu-down-arrow"></span></a>
                                           
                                        </li>
                                        <li>
                                            <a  href="History.html" aria-expanded="false"><span class="educate-icon educate-settings icon-wrap"></span> <span class="mini-click-non">历史记录</span></a>
                                        </li>
                                        
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Mobile Menu end -->
            <div class="breadcome-area">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="analytics-sparkle-area a">
            <div class="analytics-sparkle-area a">
                <div class="container-fluid well">
                    <div class="form-group" id="selectList">
                    	<form class="form-inline" onsubmit="return false">
							<label form="name" style="margin-left: 20px; margin-right: 5px;">文件名称</label>
							<input class="form-control" type="text" v-model="FName" placeholder="" />
							<button class="btn selectBtn" @click="doSelect">查询</button>
							<button class="btn selectBtn" @click="findAll">取消</button>
							<button type="button" class="btn addBtn" data-toggle="modal" data-target="#addFile" @click="getIndex(-1)"><a href="#" class="" >文件上传</a></button>
						</form>
                    </div>
                </div>
            </div>
        </div>
        <div class="product-sales-area mg-tb-30">
            <div id="tableapp1" class="data" style="width: 1200px;margin:0 auto;">
            	<table class="table table-striped table-hover">
            		<tr id="th">
            		<th>序号</th>
            		<th>文件序列号</th>
            		<th>文件名</th>
            		<th>文件大小</th>
            		<th>文件更新时间</th>
            		<th>操作</th>
            		</tr>
            		
            		<tr v-for="(tr,index) in displayData">
            		<td>{{index+1}}</td>
            		<td>{{tr.fid}}</td>
            		<td>{{tr.fileName}}</td>
            		<td>{{tr.size}}</td> 
            		<td>{{tr.time}}</td>
            		<td>
            			<a class="btn btn-success" href="javascript:void(0);" @click="getDownloadFile(tr.fid);">下载</a>
						<button type="button" class="btn addBtn" data-toggle="modal" data-target="#addFile2" @click="getFid(tr.fid);"><a href="#" class="" >文件更新</a></button>
            			<a href="javascript:void(0);" @click="getDid(tr.fid);" class="info"data-toggle="modal" data-target="#delete">删除</a>
						<a href="javascript:void(0);" @click="getEDid(tr.fid,tr.isEnc);" class="info"data-toggle="modal" data-target="#encode">加密</a>
						<a href="javascript:void(0);" @click="getZDid(tr.fid,tr.isLock);" class="info"data-toggle="modal" data-target="#zip">压缩</a>
						<a href="javascript:void(0);" @click="getRDid(tr.fid,tr.fileName);" class="info"data-toggle="modal" data-target="#rename">重命名</a>
            		</td>
            		
            		</tr>
            		
            		</table>
            </div>
          
        </div>
        </div>
<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true" data-keyboard="false"data-backdrop="false">
				            <div class="modal-dialog" id="updateList">
				                <div class="modal-content">
				                    <div class="modal-header b">
				                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				                    &times;
				                </button>
				                        <h4 class="modal-title" id="myModalLabel">
				                    删除
				                </h4>
				                    </div>
				                    <div class="modal-body form-group">
										您确定要删除此文件吗?
				                    </div>
				                    <div class="modal-footer">
				                        <button type="button" class="btn btn-primary" onclick="vm.deletee(vm.Did)" data-dismiss="modal">
				                    确定
				                </button>
								<button type="button" class="btn btn-default"  data-dismiss="modal">
								    取消
								</button>
				                    </div>
				                </div>
				                <!-- /.modal-content -->
				            </div>
				            <!-- /.modal -->
				        </div>
<div class="modal fade" id="rename" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true" data-keyboard="false"data-backdrop="false">
				            <div class="modal-dialog" id="updateList">
				                <div class="modal-content">
				                    <div class="modal-header b">
				                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				                    &times;
				                </button>
				                        <h4 class="modal-title" id="myModalLabel">
				                    重命名
				                </h4>
				                    </div>
				                    <div class="modal-body form-group">
										名称
				                    </div>
									<div>
										<input class="form-control" type="text" v-model="NewName" placeholder=""/>
									</div>
				                    <div class="modal-footer">
				                        <button type="button" class="btn btn-primary" onclick="reNameVue.doEncode()" data-dismiss="modal">
				                    确定
				                </button>
								<button type="button" class="btn btn-default"  data-dismiss="modal">
								    取消
								</button>
				                    </div>
				                </div>
				                <!-- /.modal-content -->
				            </div>
				            <!-- /.modal -->
				        </div>						
<div class="modal fade" id="encode" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true" data-keyboard="false"data-backdrop="false">
				            <div class="modal-dialog" id="updateList">
				                <div class="modal-content">
				                    <div class="modal-header b">
				                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				                    &times;
				                </button>
				                        <h4 class="modal-title" id="myModalLabel">
				                    {{SName[IsEncode]}}
				                </h4>
				                    </div>
				                    <div class="modal-body form-group">
										您确定要{{SName[IsEncode]}}此文件吗?
				                    </div>
									<div>
										PassWord(8位):
										<input class="form-control" type="text" v-model="PWD" placeholder="" />
									</div>
				                    <div class="modal-footer">
				                        <button type="button" class="btn btn-primary" onclick="encodeVue.doEncode()" data-dismiss="modal">
				                    确定
				                </button>
								<button type="button" class="btn btn-default"  data-dismiss="modal">
								    取消
								</button>
				                    </div>
				                </div>
				                <!-- /.modal-content -->
				            </div>
				            <!-- /.modal -->
				        </div>
<div class="modal fade" id="zip" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true" data-keyboard="false"data-backdrop="false">
				            <div class="modal-dialog" id="updateList">
				                <div class="modal-content">
				                    <div class="modal-header b">
				                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				                    &times;
				                </button>
				                        <h4 class="modal-title" id="myModalLabel">
				                    {{SName[IsEncode]}}
				                </h4>
				                    </div>
				                    <div class="modal-body form-group">
										您确定要{{SName[IsEncode]}}此文件吗?
				                    </div>
									
				                    <div class="modal-footer">
				                        <button type="button" class="btn btn-primary" onclick="ZipVue.doEncode()" data-dismiss="modal">
				                    确定
				                </button>
								<button type="button" class="btn btn-default"  data-dismiss="modal">
								    取消
								</button>
				                    </div>
				                </div>
				                <!-- /.modal-content -->
				            </div>
				            <!-- /.modal -->
				        </div>
<div class="modal fade" id="logout" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true" data-keyboard="false"data-backdrop="false">
				            <div class="modal-dialog" id="updateList">
				                <div class="modal-content">
				                    <div class="modal-header b">
				                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				                    &times;
				                </button>
				                        <h4 class="modal-title" id="myModalLabel">
				                    登出
				                </h4>
				                    </div>
				                    <div class="modal-body form-group">
										您确定要退出登录?
				                    </div>
				                    <div class="modal-footer">
				                        <button type="button" class="btn btn-primary" onclick="vm.logout()" data-dismiss="modal">
				                    确定
				                </button>
								<button type="button" class="btn btn-default"  data-dismiss="modal">
								    取消
								</button>
				                    </div>
				                </div>
				                <!-- /.modal-content -->
				            </div>
				            <!-- /.modal -->
				        </div>
<div class="modal fade" id="addFile" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true" data-keyboard="false"data-backdrop="false">
				            <div class="modal-dialog" id="updateList">
				                <div class="modal-content">
				                    <div class="modal-header b">
				                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				                    &times;
				                </button>
				                        <h4 class="modal-title" id="myModalLabel">
				                    添加
				                </h4>
				                    </div>
				                    <div class="modal-body form-group">
									文件
									<input type="file" @change="getFile($event)" />
				                    </div>
				                    <div class="modal-footer">
				                        <button type="button" class="btn btn-primary" onclick="updateVue.doAdd()" data-dismiss="modal">
				                    确定
				                </button>
								<button type="button" class="btn btn-default"  data-dismiss="modal">
								    取消
								</button>
				                    </div>
				                </div>
				                <!-- /.modal-content -->
				            </div>
				            <!-- /.modal -->
				        </div>
<div class="modal fade" id="addFile2" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
				aria-hidden="true" data-keyboard="false"data-backdrop="false">
				            <div class="modal-dialog" id="updateList">
				                <div class="modal-content">
				                    <div class="modal-header b">
				                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
				                    &times;
				                </button>
				                        <h4 class="modal-title" id="myModalLabel">
				                    更新
				                </h4>
				                    </div>
				                    <div class="modal-body form-group">
									文件
									<input type="file" @change="getFile($event)" />
				                    </div>
				                    <div class="modal-footer">
				                        <button type="button" class="btn btn-primary" onclick="updateVue2.doUpdate()" data-dismiss="modal">
				                    确定
				                </button>
								<button type="button" class="btn btn-default"  data-dismiss="modal">
								    取消
								</button>
				                    </div>
				                </div>
				                <!-- /.modal-content -->
				            </div>
				            <!-- /.modal -->
				        </div>
    <!-- jquery
		============================================ -->
    <script src="js/vendor/jquery-1.12.4.min.js"></script>
    <!-- bootstrap JS
		============================================ -->
    <script src="js/bootstrap.min.js"></script>
    <!-- wow JS
		============================================ -->
    <script src="js/wow.min.js"></script>
    <!-- price-slider JS
		============================================ -->
    <script src="js/jquery-price-slider.js"></script>
    <!-- meanmenu JS
		============================================ -->
    <script src="js/jquery.meanmenu.js"></script>
    <!-- owl.carousel JS
		============================================ -->
    <script src="js/owl.carousel.min.js"></script>
    <!-- sticky JS
		============================================ -->
    <script src="js/jquery.sticky.js"></script>
    <!-- scrollUp JS
		============================================ -->
    <script src="js/jquery.scrollUp.min.js"></script>
    <!-- counterup JS
		============================================ -->
    <script src="js/counterup/jquery.counterup.min.js"></script>
    <script src="js/counterup/waypoints.min.js"></script>
    <script src="js/counterup/counterup-active.js"></script>
    <!-- mCustomScrollbar JS
		============================================ -->
    <script src="js/scrollbar/jquery.mCustomScrollbar.concat.min.js"></script>
    <script src="js/scrollbar/mCustomScrollbar-active.js"></script>
    <!-- metisMenu JS
		============================================ -->
    <script src="js/metisMenu/metisMenu.min.js"></script>
    <script src="js/metisMenu/metisMenu-active.js"></script>
    <!-- morrisjs JS
		============================================ -->
    
    <!-- morrisjs JS
		============================================ -->
    <script src="js/sparkline/jquery.sparkline.min.js"></script>
    <script src="js/sparkline/jquery.charts-sparkline.js"></script>
    <script src="js/sparkline/sparkline-active.js"></script>
    <!-- calendar JS
		============================================ -->
    <script src="js/calendar/moment.min.js"></script>
    <script src="js/calendar/fullcalendar.min.js"></script>
    <script src="js/calendar/fullcalendar-active.js"></script>
    <!-- plugins JS
		============================================ -->
    <script src="js/plugins.js"></script>
    <!-- main JS
		============================================ -->
    <script src="js/main.js"></script>
	<script src="js/toastr.min.js"></script>
	
	<script type="text/javascript">
				toastr.options.positionClass = 'toast-top';
	</script>

</body>

</html>
<script src="js/axios.min.js"></script>
<script src="js/vue.js"></script>

<script>
	var vm = new Vue({
	    el:"#tableapp1",
	    data:{
	        scolor:["","status1","status2","status3","status4"],
	        sname:["","新建","下载","删除","更新","加密","解密","压缩","解压"],
	        displayData:null,
			Did : 0,
			downloadId : 0
	    },
	    mounted(){
	        axios
	            .post("Dir/SDir.do")	
	            .then(response => (this.displayData = response.data.data))
	            .catch(function (error) {
	                console.log(error);
	            });
	    },
	    methods:{
			deletee(fid){
				axios
				    .get("File/deleteFile.do",
					{
						params:{
							Fid:fid
						}
					}
					)	
				    .then(response => {
						if(response.data.result=="true"){
							this.displayData = response.data.data
						}
						else{
							window.alert("删除失败")
						}
					})
				    .catch(function (error) {
				        console.log(error);
				    });
			},
			
			changestate(id,state){
				axios
				    .get("/equipment/changestatus.do",
					{
						params:{
							eid:id,
							status:state
						}
					}
					)	
				    .then(response => {
						if(response.data.result=="true"){
							this.displayData = response.data.data
						}
						else{
							window.alert("删除失败")
						}
					})
				    .catch(function (error) {
				        console.log(error);
				    });
			},
			getIndex : function(Index){
				if(Index<0){
					updateVue.NewData = {"eid":"","estate":1,"products":[]};
					return;
				}
				Edata = vm.displayData[Index];
				updateVue.NewData = Edata;
			},
			getDid: function(id){
				this.Did = id;
			},
			getDownloadFile : function(id){
				this.downloadId = id;
				console.log(id);
				window.location.href="File/downloadFile.do?downloadId="+this.downloadId;
			},
			getFid : function(id){
				updateVue2.UpdateId = id;
			},
			logout : function(){
				window.location.href="user/logout.do";
			},
			getEDid:function(id,isEnc){
				encodeVue.UpdateId = id;
				encodeVue.IsEncode = isEnc; 
			},
			getZDid:function(id,isEnc){
				ZipVue.UpdateId = id;
				ZipVue.IsEncode = isEnc; 
			},
			getRDid: function(id,FileName){
				reNameVue.Fid=id;
				reNameVue.NewName = FileName;
			}
	    }
	})
	
	var selectVue = new Vue({
		el : '#selectList',
		data : {
			FName : "",
		},
		methods:{
			doSelect : function(){
				if(this.FName == "" || this.FName == null || this.FName == " "){
					this.findAll();
					return ;
				}
				axios.post('File/select.do?FName='+this.FName)
				.then(response => (vm.displayData = response.data.data))
				.catch(function(error){
					console.log(error)
				})
			},
			getIndex : function(Index){
				updateVue.NewData = {"eid":"","estate":1,"products":[]};
			},
			findAll : function(){
				this.FName = "";
				axios
				    .post("Dir/SDir.do")	
				    .then(response => (vm.displayData = response.data.data))
				    .catch(function (error) {
				        console.log(error);
				    });
			}
		}
	});
	
	var updateVue = new Vue({
		el : '#addFile',
		data : {
			File : null,
			UpdateId:0
		},
		methods: {
			doAdd : function(){
				if(this.File == null){
					
				}
				else {
					let formdata = new FormData();
					formdata.append("data",JSON.stringify(this.NewData));
					formdata.append("file",this.File);
					const config = {
						headers : {
							"Content-Type":"multipart/form-data"
						}
					}
					axios.post('File/uploadFile.do?',formdata,config)
					.then(response => (vm.displayData = response.data.data))
					.catch(function(error){
						console.log(error)
					})
				}
			},
			getFile : function(event){
			    this.File = event.target.files[0];
				console.log(this.file)
			},
		},
		
	})
	
	var updateVue2 = new Vue({
		el : '#addFile2',
		data : {
			File : null,
			UpdateId:0
		},
		methods: {	
			doUpdate : function(){
				if(this.File == null){
					return ;
				}
				else {
					let formdata = new FormData();
					formdata.append("file",this.File);
					const config = {
						headers : {
							"Content-Type":"multipart/form-data"
						}
					}
					axios.post('File/updateFile.do?fid='+this.UpdateId,formdata,config)
					.then(response => (vm.displayData = response.data.data))
					.catch(function(error){
						console.log(error)
					})
				}
			},
			getFile : function(event){
			    this.File = event.target.files[0];
				console.log(this.file)
			},
		},
		
	})
	
	var encodeVue = new Vue({
		el : '#encode',
		data : {
			IsEncode : 0,
			UpdateId:0,
			PWD : "",
			SName : ["加密","解密"],
		},
		methods: {	
			doEncode:function(){
				if(this.IsEncode==0){
				axios
				    .post("File/encodingFile.do?Fid="+this.UpdateId+"&PWD="+this.PWD)	
				    .then(response => {
						if(response.data.result=="true"){
							vm.displayData = response.data.data
						}
						else{
							window.alert("加解密失败")
						}
					})
				    .catch(function (error) {
				        console.log(error);
				    });
				}
				else{
					axios
					    .post("File/decodingFile.do?Fid="+this.UpdateId+"&PWD="+this.PWD)	
					    .then(response => {
							if(response.data.result=="true"){
								vm.displayData = response.data.data
							}
							else{
								window.alert("删除失败")
							}
						})
					    .catch(function (error) {
					        console.log(error);
					    });
				}
			},
			getFileid : function(id){
				this.UpdateId = id;
			},
		},
		
	})
	
	var ZipVue = new Vue({
		el : '#zip',
		data : {
			IsEncode : 0,
			UpdateId:0,
			PWD : "",
			SName : ["压缩","解压"],
		},
		methods: {	
			doEncode:function(){
				if(this.IsEncode==0){
				axios
				    .post("File/gzipFile.do?Fid="+this.UpdateId)	
				    .then(response => {
						if(response.data.result=="true"){
							vm.displayData = response.data.data
						}
						else{
							window.alert("加压失败")
						}
					})
				    .catch(function (error) {
				        console.log(error);
				    });
				}
				else{
					axios
					    .post("File/rzipFile.do?Fid="+this.UpdateId)	
					    .then(response => {
							if(response.data.result=="true"){
								vm.displayData = response.data.data
							}
							else{
								window.alert("解压失败")
							}
						})
					    .catch(function (error) {
					        console.log(error);
					    });
				}
			},
			getFileid : function(id){
				this.UpdateId = id;
			},
		},
		
	})
	
	var reNameVue = new Vue({
		el : '#rename',
		data : {
			Fid : 0,
			NewName : "",
		},
		methods: {	
			doEncode:function(){
				axios
				    .post("File/reNameFile.do?Fid="+this.Fid+"&NewName="+this.NewName)	
				    .then(response => {
						if(response.data.result=="true"){
							vm.displayData = response.data.data
						}
						else{
							window.alert("重命名失败")
						}
					})
				    .catch(function (error) {
				        console.log(error);
				});
			}
				
		},
		
	})
	
	
	var uname = new Vue({
		el:"#uname",
		data:{
			username:"未登录，请先登录",
			link:"index_.html",
		},
		mounted(){
		    axios
		        .get("user/whoami.do")	
		        .then(response => {
					if(response.data.username=="未登录"){
						this.username="未登录，请先登录";
						this.link="index_.html";
					}else{
						this.username="欢迎，"+response.data.username;
						this.link="/";
					}
				
				})
		        .catch(function (error) {
		            console.log(error);
		        });
		},
		methods:{
			isLogin : function(){
				if(this.username == "未登录，请先登录"){
					window.location.href="."
				}
			}
		}
	})
	
	function PNameCmp(NewData){
		for(i=0;i<NewData.products.length;i++){
			for(j = i+1;j<NewData.products.length;j++){
				if(NewData.products[i].pName == NewData.products[j].pName){
					toastr.error("存在重复产能记录")
					return false;
				}
			}
		}
		return true;
	}
	
	

	var auth = new Vue({
		el:"#menu1",
		data:{
			fa:false,
			oa:false,
			pla:false,
			wa:false,
			ta:false
		},
		mounted() {
			console.log(document.cookie);
			this.fa=this.getCookie("fa");
			this.oa=this.getCookie("oa");
			this.pla=this.getCookie("pla");
			this.wa=this.getCookie("wa");
			this.ta=this.getCookie("ta");
		},
		methods:{
			getCookie(cname)
			{
			  var name = cname + "=";
			  var ca = document.cookie.split(';');
			  for(var i=0; i<ca.length; i++) 
			  {
			    var c = ca[i].trim();
			    if (c.indexOf(name)==0) return true;
			  }
			  return false;
			}
			
		}
	})

</script>